name: Test Ubicloud Prod Runners

on:
  push:
    branches: [backup-test]
  
jobs:
  set-runner:
    timeout-minutes: 1
    runs-on: test-test
    outputs:
      runner: ${{ steps.set-runner.outputs.runner }}

    steps:
      - id: set-runner
        run: |
          echo "runner=ubuntu-latest" >> $GITHUB_OUTPUT

  main-job:
    if: always()
    needs: set-runner
    runs-on: ${{ needs.set-runner.outputs.runner && needs.set-runner.outputs.runner || 'ubicloud' }}

    steps:
      - name: Check out repository
        uses: actions/checkout@v5

      - name: Run tests
        run: |
          echo "Running tests on ${{ needs.set-runner.outputs.runner }}"
          echo "All tests passed!"